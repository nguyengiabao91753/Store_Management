@page "/product/{ProductId:int}"
@using RetailShop.Blazor.Components.Shared
@inject NavigationManager Nav
@rendermode InteractiveServer

<PageTitle>@product?.ProductName - MockStore</PageTitle>

<div class="product-detail-container">
    @if (product == null)
    {
        <div class="loading-state">
            <div class="spinner"></div>
            <p>Loading product...</p>
        </div>
    }
    else
    {
        <div class="breadcrumb">
            <a href="/">Home</a>
            <span class="separator">/</span>
            <a href="/products">Products</a>
            <span class="separator">/</span>
            <span class="current">@product.ProductName</span>
        </div>

        <div class="product-detail-grid">
            <div class="product-images">
                <div class="main-image">
                    <img src="@product.ProductImage" alt="@product.ProductName" />
                </div>
               
            </div>

            <div class="product-info-section">
                <div class="product-header">
                    <span class="product-category-badge">@product.CategoryName</span>
                    <h1 class="product-title">@product.ProductName</h1>
                    <div class="product-rating">
                        <div class="stars">
                            @for (int i = 1; i <= 5; i++)
                            {
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="@(i <= 4 ? "#fbbf24" : "#e5e7eb")" stroke="none">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                            }
                        </div>
                        <span class="rating-text">4.0 (128 reviews)</span>
                    </div>
                </div>

                <div class="product-price-section">
                    <div class="price-wrapper">
                        <span class="current-price">@product.Price.ToString("C")</span>
                        <span class="original-price">@((product.Price * 1.3m).ToString("C"))</span>
                        <span class="discount-badge">-23%</span>
                    </div>
                </div>

                <div class="product-description">
                    <h3>Description</h3>
                    <p>
                        Experience premium quality with this carefully crafted product. 
                        Designed for comfort and durability, it combines modern aesthetics 
                        with practical functionality. Perfect for everyday use and special occasions.
                    </p>
                </div>

                <div class="product-features">
                    <h3>Key Features</h3>
                    <ul>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 6L9 17l-5-5"/>
                            </svg>
                            Premium quality materials
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 6L9 17l-5-5"/>
                            </svg>
                            Fast & free shipping
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 6L9 17l-5-5"/>
                            </svg>
                            30-day money back guarantee
                        </li>
                        <li>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M20 6L9 17l-5-5"/>
                            </svg>
                            Eco-friendly packaging
                        </li>
                    </ul>
                </div>

                <div class="product-actions">
                    <div class="quantity-selector">
                        <button class="qty-btn" @onclick="DecreaseQuantity" disabled="@(quantity <= 1)">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <path d="M5 12h14"/>
                            </svg>
                        </button>
                        <input type="number" class="qty-input" @bind="quantity" min="1" max="99" />
                        <button class="qty-btn" @onclick="IncreaseQuantity" disabled="@(quantity >= 99)">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <path d="M12 5v14M5 12h14"/>
                            </svg>
                        </button>
                    </div>

                    <button class="btn-add-cart" @onclick="AddToCart">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1"/>
                            <circle cx="20" cy="21" r="1"/>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                        </svg>
                        Add to Cart
                    </button>

                    <button class="btn-wishlist" @onclick="ToggleWishlist">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="@(isWishlisted ? "currentColor" : "none")" stroke="currentColor" stroke-width="2">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                        </svg>
                    </button>
                </div>

                <div class="trust-badges">
                    <div class="badge-item">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                        </svg>
                        <span>Secure Payment</span>
                    </div>
                    <div class="badge-item">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                            <line x1="1" y1="10" x2="23" y2="10"/>
                        </svg>
                        <span>Easy Returns</span>
                    </div>
                    <div class="badge-item">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                        <span>Privacy Protected</span>
                    </div>
                </div>
            </div>
        </div>

        @* @if (relatedProducts.Any())
        {
            <section class="related-products">
                <h2>You May Also Like</h2>
                <div class="related-grid">
                    @foreach (var relatedProduct in relatedProducts)
                    {
                        <RetailShop.Blazor.Components.Shared.ProductCard Product="relatedProduct" />
                    }
                </div>
            </section>
        } *@
    }
</div>
<Toast @ref="ToastRef" />

@code {
    private Toast? ToastRef;
}
