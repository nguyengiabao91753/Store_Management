@{
    ViewData["Title"] = "Report";
}
@section csslinks {
    <link rel="stylesheet" href="~/css/Report.css" asp-append-version="true" />
}

<div class="container-fluid px-4 py-3">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div><h4 class="mb-0">Report</h4></div>
        <div>
            <button id="btnDownloadReport" class="btn btn-outline-secondary">Download</button>
        </div>
    </div>

    <div class="row g-3">
        <div class="col-md-4">
            <div class="kpi p-3">
                <div class="small text-muted">Tổng doanh thu trong năm</div>
                <div class="fs-4 fw-bold" id="totalRevenue"></div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="kpi p-3">
                <div class="small text-muted">Tổng sản phẩm đã bán trong năm</div>
                <div class="fs-4 fw-bold" id="totalProductsSold"></div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="kpi p-3">
                <div class="small text-muted">Tổng đơn hàng trong năm</div>
                <div class="fs-4 fw-bold" id="totalOrders"></div>
            </div>
        </div>

        @* <div class="col-md-3"> *@
        @*     <div class="kpi"> *@
        @*         <div class="small text-muted">Net Profit</div> *@
        @*         <div class="fs-4 fw-bold">12,650.00 USD</div> *@
        @*         <div class="small text-success">+ USD 3,792 (0.3%)</div> *@
        @*     </div> *@
        @* </div> *@
    </div>

    <div class="row g-3 mt-3">
        @*Bar chart*@
        <div class="col-lg-8">
            <div class="graph-card p-3">
                <div class="d-flex justify-content-between mb-2">
                    <h6 class="mb-0">Report Graph</h6>
                </div>

                <div class="mb-3">
                    <label>Từ ngày:</label>
                    <input type="date" id="fromDate" />
                    <label>Đến ngày:</label>
                    <input type="date" id="toDate" />
                    <button id="btnFilter" class="btn btn-primary">Xem báo cáo</button>
                </div>

                @*Chart*@
                <div style="height: 300px; padding:16px; border-radius:8px; background:linear-gradient(180deg,#f8fbff,#fff)">
                    <canvas id="BarChart"></canvas>
                </div>

                @*Modal chi tiết*@
                <div id="ReportDetailModal" class="modal-overlay" style="display:none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 id="ReportModalTitle"></h4>
                            <button id="closeModalBtn" class="close-btn">×</button>
                        </div>
                        <div class="modal-body" id="ReportDetailContainer"></div>
                    </div>
                </div>

                @* <div class="d-flex gap-3 mt-3"> *@
                @*     <div><strong>Amount</strong><div class="small text-muted">12,650.00 USD</div></div> *@
                @*     <div><strong>Growth</strong><div class="small text-success">+1,543.30 USD</div></div> *@
                @*     <div><strong>Growth %</strong><div class="small text-success">12.2%</div></div> *@
                @* </div> *@
            </div>
        </div>

        @*Sản phẩm bán chạy*@
        <div class="col-lg-4">
            <div class="fav-list p-3 overflow-auto" style="height: 382.6px;">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h6 class="mb-0">Sản phẩm bán chạy</h6>
                </div>
                <ul class="list-unstyled mb-0" id="bestSellingList">
                </ul>
            </div>
        </div>

    </div>

    <div class="row g-3 mt-3">

        @*Khách hàng thân thiết*@
        <div class="col-lg-4">
            <div class="fav-list p-3 overflow-auto" style="height: 382.6px;">
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <h6 class="mb-0">Khách hàng thân thiết</h6>
                </div>
                <ul class="list-unstyled mb-0" id="loyalCustomersList">
                </ul>
            </div>
        </div>

        @*Line chart*@
        <div class="col-lg-8">
            <div class="graph-card p-3">
                <div class="d-flex justify-content-between mb-2">
                    <h6 class="mb-0">Report Graph</h6>
                    <div class="small text-muted">Total Sales Amount</div>
                </div>

                <div class="dropdown mb-3 text-end m-3">
                    <button class="btn btn-outline-primary dropdown-toggle"
                            type="button"
                            id="chartViewDropdown"
                            data-bs-toggle="dropdown"
                            aria-expanded="false">
                        Theo Tháng
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="chartViewDropdown">
                        <li><a class="dropdown-item chart-view-option" data-group="month">Theo Tháng</a></li>
                        <li><a class="dropdown-item chart-view-option" data-group="year">Theo Năm</a></li>
                    </ul>
                </div>

                @*Chart*@
                <div style="height: 300px; padding:16px; border-radius:8px; background:linear-gradient(180deg,#f8fbff,#fff)">
                    <canvas id="LineChart"></canvas>
                </div>

                @* <!-- Modal chi tiết --> *@
                @* <div id="ReportDetailModal" class="modal-overlay" style="display:none;"> *@
                @*     <div class="modal-content"> *@
                @*         <div class="modal-header"> *@
                @*             <h4 id="ReportModalTitle"></h4> *@
                @*             <button id="closeModalBtn" class="close-btn">×</button> *@
                @*         </div> *@
                @*         <div class="modal-body" id="ReportDetailContainer"></div> *@
                @*     </div> *@
                @* </div> *@

                @* <div class="d-flex gap-3 mt-3"> *@
                @*     <div><strong>Amount</strong><div class="small text-muted">12,650.00 USD</div></div> *@
                @*     <div><strong>Growth</strong><div class="small text-success">+1,543.30 USD</div></div> *@
                @*     <div><strong>Growth %</strong><div class="small text-success">12.2%</div></div> *@
                @* </div> *@
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="~/js/Report.js" asp-append-version="true"></script>
}
